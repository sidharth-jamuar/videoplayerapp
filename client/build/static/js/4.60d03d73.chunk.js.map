{"version":3,"sources":["actions/videos.js","components/VideoPlayer.js"],"names":["uploadVideo","fd","console","log","_ref","Object","_Users_jsidharth_Desktop_VideoPlayer_videoplayerapp_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_jsidharth_Desktop_VideoPlayer_videoplayerapp_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","dispatch","res","wrap","_context","prev","next","axios","method","url","data","headers","content-type","concat","_boundary","sent","receiveAction","actionType","video","UPLOAD_VIDEO","stop","this","_x","apply","arguments","fetchLatestVideos","_ref3","_callee3","_context3","get","FETCH_VIDEOS","_x3","fetchMostViewedVideos","isMobile","_ref4","_callee4","_context4","FETCH_MOST_VIEWED","_x4","fetchMyVideos","user","_ref5","_callee5","_context5","FETCH_OWN_VIDEOS","_x5","incrementView","id","_callee6","_context6","VideoPlayer","props","_this","_Users_jsidharth_Desktop_VideoPlayer_videoplayerapp_client_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_jsidharth_Desktop_VideoPlayer_videoplayerapp_client_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_jsidharth_Desktop_VideoPlayer_videoplayerapp_client_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","doesUserHaveAccess","x","location","state","activeVideo","access","find","item","username","React","createRef","undefined","_id","uploader","prevProps","_this2","targetInfo","private","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","className","onClick","e","history","push","sendVideoRequest","title","react_player__WEBPACK_IMPORTED_MODULE_6___default","Url","controls","playing","ref","pip","width","height","views","Description","Component","connect","users","stateProps","dispatchProps","ownProps","assign"],"mappings":"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","file":"static/js/4.60d03d73.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { receiveAction } from \"./index\";\nimport { actionType } from \"../constants/actionType\";\nexport const uploadVideo=(fd)=>{\n    console.log(fd)\n    return async dispatch =>{\n           const res = await axios({\n            method: 'post',\n            url: \"/api/uploadVideo\",\n            data: fd,\n            headers: {\n            'content-type': `multipart/form-data; boundary=${fd._boundary}`,\n            },\n        });\n        dispatch(receiveAction(actionType.video.UPLOAD_VIDEO,res.data))\n\n    }\n}\nexport const videoList=()=>{\n    return async dispatch=>{\n    const res= await axios.get(\"/api/videoList\")\n    dispatch(receiveAction(actionType.video.FETCH_VIDEOS,res.data))\n    }\n}\nexport const fetchLatestVideos= () => {\n    return async dispatch=> {\n        const res=await axios.get(\"/api/latestVideos\")\n        dispatch(receiveAction(actionType.video.FETCH_VIDEOS,res.data))\n    }\n}\nexport const fetchMostViewedVideos= (isMobile) =>{\n    return async dispatch=>{\n        const res=await axios.get(`/api/mostViewedVideos?isMobile=${isMobile}`);\n        dispatch(receiveAction(actionType.video.FETCH_MOST_VIEWED,res.data))\n    }\n}\nexport const fetchMyVideos= (user) =>{\n    return async dispatch =>{\n        const res=await axios.get(`/api/user/videolist?user=${user}`)\n        dispatch(receiveAction(actionType.video.FETCH_OWN_VIDEOS,res.data))\n    }\n    \n}\nexport const incrementView =id =>{\n    return async () => {\n        const res=await axios.get(`/api/incrementView?id=${id}`)\n       \n    }\n}","import React,{Component} from \"react\";\nimport ReactPlayer from \"react-player\"\nimport \"../css/VideoPlayer.css\"\nimport {connect} from \"react-redux\";\nimport {incrementView} from \"../actions/videos\"\nimport {sendVideoRequest} from \"../actions/user\"\nimport axios from \"axios\"\nclass VideoPlayer extends Component{\n    constructor(props){\n        super(props)\n       this.video=React.createRef();\n       \n    }\n    componentDidMount(){\n        const video=this.props.location.state.activeVideo;\n        console.log(this.props)\n        if(this.props.user===undefined){\n            this.props.incrementView(video._id)\n        }\n        if( this.props.user && video.uploader !==this.props.user.username)\n        {\n        this.props.incrementView(video._id)\n        }\n    }\n    componentDidUpdate(prevProps){\n        console.log(this.props)\n        console.log(prevProps)\n        const video=this.props.location.state.activeVideo;\n        if(this.props.user!==prevProps.user){\n          \n        }\n    }\n    doesUserHaveAccess=()=>{\n        const video=this.props.location.state.activeVideo;\n       \n     const x=video.access.find(item=>item===this.props.user.username)\n     console.log(x)\n        if(x){\n            return true\n        }\n        else{\n            return false\n        }\n    }\n    render(){\n      \n        const targetInfo=this.props.location.state.activeVideo\n        console.log(targetInfo)\n        if(this.props.user===undefined && targetInfo.private){\n            return <div className=\"video-is-private\">\n            This video has been marked private by the user.If you want to view this video please send a request to the uploader.\n            Please Login to send request.\n            <div className=\"request-send-container\">\n                <button className=\"btn-common btn-cancel\" onClick={e=>{this.props.history.push(\"/\")}}>Go To Homepage</button>\n                <button className=\"btn-request btn-common\" onClick={e=>{this.props.history.push(\"/login\")}}>Login</button>\n            </div>\n            </div>\n        }\n        if( this.props.user &&targetInfo.private && (targetInfo.uploader !==this.props.user.username && !this.doesUserHaveAccess())){\n            return <div className=\"video-is-private\">\n                This video has been marked private by the user.If you want to view this video please send a request to the uploader.\n                <div className=\"request-send-container\">\n                    <button className=\"btn-common btn-cancel\" onClick={e=>{this.props.history.push(\"/\")}}>Cancel</button>\n                    <button className=\"btn-request btn-common\" onClick={e=>{this.props.sendVideoRequest(targetInfo.uploader,this.props.user.username,targetInfo.title,targetInfo._id,this.props.history)}}>Send Request</button>\n                </div>\n                </div>\n        }\n \n        return(\n            <div className=\"react-player-container\">\n                <div className=\"react-player\"><ReactPlayer url={targetInfo.Url} controls playing ref={this.video} pip  width=\"100%\" height=\"100%\"/></div>\n                \n                <div className=\"target-info-container\">\n                {targetInfo.views && <div><span>Views:</span>{targetInfo.views}</div>} \n                {targetInfo.title && <div><span>Title:</span>{targetInfo.title}</div>}  \n              {targetInfo.Description && <div><span>Description:</span>{targetInfo.Description}</div>}  \n             \n                </div>\n              \n            </div>\n        )\n    }\n}\nconst mapStateToProps=state=>{\n    return{\n    user:state.users.user\n    }\n}\nconst mergeProps=(stateProps,dispatchProps,ownProps)=>{\n   return Object.assign({},ownProps,{\n       user:stateProps.user,\n       incrementView:dispatchProps.incrementView,\n       sendVideoRequest:dispatchProps.sendVideoRequest\n    })\n}\nexport default connect(mapStateToProps,{incrementView,sendVideoRequest},mergeProps)(VideoPlayer);"],"sourceRoot":""}