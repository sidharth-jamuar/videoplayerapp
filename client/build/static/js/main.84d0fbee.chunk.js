(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={search:{SEARCH_VIDEOS:"SEARCH_VIDEOS",ERROR_VIDEO:"ERROR_VIDEO",CLEAR_SEARCH_LIST:"CLEAR_SEARCH_LIST"},user:{LOGIN_USER:"LOGIN_USER",LOGOUT_USER:"LOGOUT_USER",IS_AUTH:"IS_AUTH",UPDATE_USER:"UPDATE_USER"},video:{UPLOAD_VIDEO:"UPLOAD_VIDEO",FETCH_VIDEOS:"FETCH_VIDEOS",FETCH_MOST_VIEWED:"FETCH_MOST_VIEWED",FETCH_OWN_VIDEOS:"FETCH_OWN_VIDEOS",SEARCH_VIDEOS:"SEARCH_VIDEOS"}}},23:function(e,t,a){e.exports=a.p+"static/media/spinner.0a8ebae8.gif"},24:function(e,t,a){"use strict";a.d(t,"e",function(){return l}),a.d(t,"c",function(){return d}),a.d(t,"d",function(){return p}),a.d(t,"f",function(){return m}),a.d(t,"a",function(){return h}),a.d(t,"b",function(){return f});var n=a(5),r=a.n(n),c=a(17),o=a(15),s=a.n(o),i=a(7),u=a(2),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return function(){var a=Object(c.a)(r.a.mark(function a(n){var c;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.post("/api/login",e);case 2:c=a.sent,n(Object(i.a)(u.a.user.LOGIN_USER,c.data)),c.data.token&&(localStorage.setItem("user",JSON.stringify(c.data)),t.push("/"),localStorage.setItem("token",c.data.token),n({type:"IS_AUTH",payload:!0}));case 5:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(a){if(e)var n=!0;else{n=!1;localStorage.removeItem("user"),localStorage.removeItem("token"),a(Object(i.a)(u.a.user.LOGOUT_USER,void 0))}a(Object(i.a)(u.a.user.IS_AUTH,n)),null!==t&&t.push("/")}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=JSON.stringify(e);return function(n){n(Object(i.a)(u.a.user.LOGIN_USER,e)),e.token&&(localStorage.setItem("user",a),t.push("/"),localStorage.setItem("token",e.token),n(Object(i.a)(u.a.user.IS_AUTH,!0)))}},m=function(e,t,a,n,o){return Object(c.a)(r.a.mark(function c(){return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.get("/api/requestAccess?uploader=".concat(e,"&requester=").concat(t,"&title=").concat(a,"&id=").concat(n));case 2:r.sent,o.push("/");case 4:case"end":return r.stop()}},c,this)}))},h=function(e,t,a){return function(){var n=Object(c.a)(r.a.mark(function n(c){var o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.post("/api/approveRequest?name=".concat(e,"&id=").concat(t,"&uploader=").concat(a));case 2:o=n.sent,c(Object(i.a)(u.a.user.UPDATE_USER,o.data));case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},f=function(e,t){return function(){var a=Object(c.a)(r.a.mark(function a(n){var c;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.post("/api/declineRequest?name=".concat(e,"&uploader=").concat(t));case 2:c=a.sent,console.log(c.data),n(Object(i.a)(u.a.user.UPDATE_USER,c.data));case 5:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},26:function(e,t,a){"use strict";a.d(t,"c",function(){return l}),a.d(t,"a",function(){return d}),a.d(t,"b",function(){return p});var n=a(5),r=a.n(n),c=a(17),o=a(15),s=a.n(o),i=a(7),u=a(2),l=function(e,t){return function(){var a=Object(c.a)(r.a.mark(function a(n){var c;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s.a.get("/api/searchVideo?keyword=".concat(e));case 3:c=a.sent,n(Object(i.a)(u.a.search.SEARCH_VIDEOS,c.data)),t.push("/search"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n(Object(i.a)(u.a.search.ERROR_VIDEO));case 11:case"end":return a.stop()}},a,this,[[0,8]])}));return function(e){return a.apply(this,arguments)}}()},d=function(){return function(e){e(Object(i.a)(u.a.search.CLEAR_SEARCH_LIST,void 0))}},p=function(e,t,a){return function(){var a=Object(c.a)(r.a.mark(function a(n){var c;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(Object.keys(t).length>0)){a.next=6;break}return a.next=3,s.a.get("/api/searchVideo?keyword=".concat(e,"&start=").concat(t.start,"&end=").concat(t.end));case 3:c=a.sent,console.log(c.data),n(Object(i.a)(u.a.search.SEARCH_VIDEOS,c.data));case 6:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},38:function(e,t,a){"use strict";var n=a(9),r=a(10),c=a(11),o=a(12),s=a(13),i=a(0),u=a.n(i);t.a=function(e){return function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(c.a)(this,Object(o.a)(a).call(this,e))).playVideo=function(e){t.props.history.push({pathname:"/video/".concat(e._id),state:{activeVideo:e}})},t}return Object(s.a)(a,t),Object(r.a)(a,[{key:"render",value:function(){return u.a.createElement(e,Object.assign({},this.props,{playVideo:this.playVideo}))}}]),a}(u.a.Component)}},46:function(e,t,a){"use strict";var n=a(9),r=a(10),c=a(11),o=a(12),s=a(13),i=a(0),u=a.n(i);t.a=function(e){return function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(c.a)(this,Object(o.a)(a).call(this,e))).state={isMobile:window.innerWidth<=748},t}return Object(s.a)(a,t),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.onresize=function(){window.innerWidth<=748?e.setState({isMobile:!0}):e.setState({isMobile:!1})}}},{key:"render",value:function(){return u.a.createElement(e,Object.assign({},this.props,{isMobile:this.state.isMobile}))}}]),a}(u.a.Component)}},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){e.exports=a(96)},60:function(e,t,a){},66:function(e,t,a){},7:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e,t){return void 0!==t?(console.log(t),{type:e,payload:t}):{type:e}}},92:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),o=a.n(c),s=(a(60),a(20)),i=a(16),u=a(48),l=a(9),d=a(10),p=a(11),m=a(12),h=a(13),f=a(25),E=(a(66),a(54),a(422)),b=(a(15),a(414)),O=a(24),v=a(51),S=a(26),j=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onlogout=function(e){console.log(Object(f.a)(Object(f.a)(a))),e.preventDefault(),localStorage.removeItem("token");a.props.dispatch(Object(O.c)(!1,a.props.history))},a.state={keyword:""};var n=localStorage.getItem("token");return a.props.dispatch(Object(O.c)(n)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",function(e){e.preventDefault(),window.scrollY>300?(document.getElementById("navbar").classList.remove("navbar"),document.getElementById("navbar").classList.add("solid-navbar")):window.scrollY<=300&&(document.getElementById("navbar").classList.remove("solid-navbar"),document.getElementById("navbar").classList.add("navbar"))})}},{key:"render",value:function(){var e=this,t=this.props.isAuth.auth;return console.log(this.state),r.a.createElement("div",{className:"navbar",id:"navbar"},r.a.createElement("div",{className:"Logo"},r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(t){e.props.history.push("/")}},"VideoStream")),r.a.createElement("div",{className:"searchBar"},r.a.createElement("input",{type:"text",className:"search",placeholder:"...Search ",onChange:function(t){e.setState({keyword:t.target.value})}}),r.a.createElement("button",{className:"btn-common btn-search",onClick:function(t){e.props.dispatch(Object(S.c)(e.state.keyword,e.props.history))}},"Search")),r.a.createElement("div",{className:"main-buttons-container"},r.a.createElement("ul",{className:"buttons-container"},t&&r.a.createElement("li",{className:"button-item"},r.a.createElement("button",{className:"btn-common btn-profile",onClick:function(t){return e.props.history.push("/profile")}},"Profile")),!t&&r.a.createElement("li",{className:"button-item"},r.a.createElement(b.a,{className:"btn-login btn-common",to:"/login"},"Login")),!t&&r.a.createElement("li",{className:"button-item"},r.a.createElement("button",{className:"btn-common btn-signup"},"SignUp")),t&&r.a.createElement("li",{className:"button-item"},r.a.createElement("button",{onClick:function(t){e.onlogout(t)}},r.a.createElement(v.a,{className:"icon-common"}))))))}}]),t}(r.a.Component),y=Object(E.a)(Object(i.b)(function(e){return{isAuth:e.isAuth}})(j)),g=function(e){var t=function(t){function a(){return Object(l.a)(this,a),Object(p.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,t),Object(d.a)(a,[{key:"componentDidMount",value:function(){this._checkAndRedirect()}},{key:"componentDidUpdate",value:function(){this._checkAndRedirect()}},{key:"_checkAndRedirect",value:function(){localStorage.getItem("token")||this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(e,this.props))}}]),a}(r.a.Component);return Object(i.b)(function(e){return{isAuth:e.isAuth.auth}})(t)},k=a(38),_=(a(92),a(18)),w=a(19),I=a(46),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={searchBar:!1,keyword:""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"onlogout",value:function(e){e.preventDefault(),localStorage.removeItem("token");this.props.dispatch(Object(O.c)(!1,this.props.history))}},{key:"render",value:function(){var e=this,t=this.props.isAuth;return r.a.createElement(r.a.Fragment,null,this.props.isMobile&&!this.state.searchBar&&r.a.createElement("div",{className:"footer-container"},r.a.createElement(_.a,{className:"icon-fawesome",icon:w.a,size:"2x",color:"white",onClick:function(t){return e.props.history.push("/")}}),r.a.createElement(_.a,{className:"icon-fawesome",icon:w.c,size:"2x",color:"white",onClick:function(t){e.setState({searchBar:!0})}}),r.a.createElement(_.a,{className:"icon-fawesome",icon:w.b,size:"2x",color:"white",onClick:function(t){return e.props.dispatch(Object(S.c)("",e.props.history))}}),t&&r.a.createElement(_.a,{className:"icon-fawesome",icon:w.f,size:"2x",color:"white",onClick:function(t){e.props.history.push("/profile")}}),!t&&r.a.createElement(_.a,{className:"icon-fawesome",icon:w.d,size:"2x",color:"white",onClick:function(t){e.props.history.push("/login")}}),t&&r.a.createElement(_.a,{className:"icon-fawesome",icon:w.e,size:"2x",color:"white",onClick:function(t){e.onlogout(t)}})),this.props.isMobile&&this.state.searchBar&&r.a.createElement("div",{className:"searchBar-footer-container"},r.a.createElement("input",{type:"text",id:"search-input-footer",onChange:function(t){e.setState({keyword:t.target.value})}}),r.a.createElement(_.a,{className:"icon-fawesome",id:"btn-footer",icon:w.c,size:"2x",color:"white",onClick:function(t){return e.props.dispatch(Object(S.c)(e.state.keyword,e.props.history))}}),r.a.createElement("div",{className:"close-btn",onClick:function(t){e.setState({searchBar:!1})}},"X")))}}]),t}(r.a.Component),A=Object(E.a)(Object(i.b)(function(e){return{isAuth:e.isAuth.auth,videos:e.videos}})(Object(I.a)(R))),C=a(420),N=a(415),D=a(23),U=a.n(D),V=(a(53),Object(n.lazy)(function(){return Promise.all([a.e(10),a.e(1)]).then(a.bind(null,419))})),T=Object(n.lazy)(function(){return Promise.all([a.e(6),a.e(2)]).then(a.bind(null,423))}),L=Object(n.lazy)(function(){return a.e(3).then(a.bind(null,416))}),x=Object(n.lazy)(function(){return Promise.all([a.e(8),a.e(4)]).then(a.bind(null,417))}),H=Object(n.lazy)(function(){return Promise.all([a.e(9),a.e(5)]).then(a.bind(null,421))}),z=function(e){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",{className:"loader loader-search"},r.a.createElement("img",{src:U.a}))},r.a.createElement(V,e))},B=function(e){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",{className:"loader loader-search"},r.a.createElement("img",{src:U.a}))},r.a.createElement(H,e))},M=function(e){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",{className:"loader loader-search"},r.a.createElement("img",{src:U.a}))},r.a.createElement(L,e))},P=function(e){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",{className:"loader loader search"},r.a.createElement("img",{src:U.a}))},r.a.createElement(T,e))},F=function(e){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",{className:"loader loader-search"},r.a.createElement("img",{src:U.a}))},r.a.createElement(x,e))},G=function(){return r.a.createElement(C.a,null,r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement(N.a,{path:"/",exact:!0,component:B}),r.a.createElement(N.a,{path:"/search",exact:!0,component:Object(k.a)(M)}),r.a.createElement(N.a,{path:"/login",component:z}),r.a.createElement(N.a,{path:"/profile",component:g(P)}),r.a.createElement(N.a,{path:"/video/:id",component:F}),r.a.createElement(A,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(6),J=a(2),q={},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J.a.user.LOGIN_USER:case J.a.user.LOGOUT_USER:case J.a.user.UPDATE_USER:return Object(W.a)({},e,{user:t.payload});default:return e}},X={auth:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J.a.user.IS_AUTH:return Object(W.a)({},e,{auth:t.payload});default:return e}},K={},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J.a.video.FETCH_VIDEOS:return Object(W.a)({},e,{latestVideos:t.payload});case J.a.video.UPLOAD_VIDEO:return Object(W.a)({},e,{userVideos:Object(W.a)({},e.userVideos,t.payload)});case J.a.video.FETCH_OWN_VIDEOS:return Object(W.a)({},e,{userVideos:t.payload});case J.a.video.FETCH_MOST_VIEWED:return Object(W.a)({},e,{mostViewed:t.payload});case J.a.video.SEARCH_VIDEOS:return void 0===e.searchResults&&(e.searchResults=[]),Object(W.a)({},e,{searchResults:e.searchResults.concat(t.payload)});case J.a.search.CLEAR_SEARCH_LIST:return Object(W.a)({},e,{searchResults:void 0});default:return e}},Z=Object(s.c)({isAuth:$,users:Y,videos:Q}),ee=Object(s.d)(Z,{},Object(s.a)(u.a));if(localStorage.getItem("token")&&(ee.dispatch({type:"IS_AUTH",payload:!0}),localStorage.getItem("user"))){var te=localStorage.getItem("user"),ae=JSON.parse(te);ee.dispatch({type:"LOGIN_USER",payload:ae})}o.a.render(r.a.createElement(function(){return r.a.createElement(i.a,{store:ee},r.a.createElement(G,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[55,11,7]]]);
//# sourceMappingURL=main.84d0fbee.chunk.js.map